(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a331a"],{"00ae":function(t,i,e){"use strict";e.r(i);var n;e("99af"),e("4de4"),e("c975"),e("d81d"),e("fb6a"),e("a9e3"),e("d3b7"),e("4d63"),e("ac1f"),e("25f0"),e("5319"),e("1276");try{throw 1}catch(yt){window.U=window.U||{}}var s=["+","‒","–","-","|"],o=[">","<","^","v"],a=s.concat(o),h="ontouchstart"in window||"onmsgesturechange"in window;function r(t,i){this.x=t,this.y=i}function l(t,i){return null!=i&&t.x==i.x&&t.y==i.y}function u(t,i){return new r(t.x-i.x,t.y-i.y)}function f(t,i){this.w=Math.min(t.x,i.x),this.A=Math.min(t.y,i.y),this.I=Math.max(t.x,i.x),this.J=Math.max(t.y,i.y)}function c(t){return new r(t.w,t.A)}r.prototype.add=function(t){return new r(this.x+t.x,this.y+t.y)},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.scale=function(t){return new r(this.x*t,this.y*t)},f.prototype.contains=function(t){return t.x>=this.w&&t.x<=this.I&&t.y>=this.A&&t.y<=this.J};var d=new r(-1,0),v=new r(1,0),w=new r(0,-1),p=new r(0,1),m=[d,v,w,p];function g(){this.h=this.value=null}function y(t){return null!=t.h?t.h:t.value}function x(t){return-1!=a.indexOf(y(t))}function b(t){return null==t.value&&null==t.h}function C(t,i,e,n){this.left=t,this.right=i,this.j=e,this.i=n,this.P=this.L=this.Q=this.M=!1}function k(t){return t.left+t.right+t.j+t.i}function M(t,i){this.position=t,this.value=i}function E(t,i){this.position=t,this.n=i}function T(t){this.state=t,this.canvas=document.getElementById("ascii-canvas"),this.context=this.canvas.getContext("2d"),this.zoom=1,this.offset=new r(9e3,5100),this.f=!0,this.B=!1,S(this)}function S(t){try{t.canvas.width=document.querySelector("#ascii-container").clientWidth,t.canvas.height=document.querySelector("#ascii-container").clientHeight,t.f=!0}catch(i){}}function z(t){var i=t.context;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.canvas.width,t.canvas.height),i.scale(t.zoom,t.zoom),i.translate(t.canvas.width/2/t.zoom,t.canvas.height/2/t.zoom);var e=u(A(t,new r(0,0)),new r(3,3)),n=A(t,new r(t.canvas.width,t.canvas.height)).add(new r(3,3));e.x=Math.max(0,Math.min(e.x,2e3)),n.x=Math.max(0,Math.min(n.x,2e3)),e.y=Math.max(0,Math.min(e.y,600)),n.y=Math.max(0,Math.min(n.y,600)),i.lineWidth="1",i.strokeStyle="#EEEEEE",i.beginPath();for(var s=e.x;s<n.x;s++)i.moveTo(9*s-t.offset.x,0-t.offset.y),i.lineTo(9*s-t.offset.x,17*t.state.cells.length-t.offset.y);for(s=e.y;s<n.y;s++)i.moveTo(0-t.offset.x,17*s-t.offset.y),i.lineTo(9*t.state.cells.length-t.offset.x,17*s-t.offset.y);t.context.stroke(),s=!t.B,i.font="15px Courier New";for(var o=e.x;o<n.x;o++)for(var a=e.y;a<n.y;a++){var h=P(t.state,new r(o,a));(x(h)||null!=h.h&&" "!=y(h))&&(t.context.fillStyle=null!=h.h?"#DEF":"#F5F5F5",i.fillRect(9*o-t.offset.x,17*(a-1)-t.offset.y,9,17));var l=J(t.state,new r(o,a));null==l||x(h)&&!s||(t.context.fillStyle="#000000",i.fillText(l,9*o-t.offset.x,17*a-t.offset.y-3))}if(t.B){for(i.lineWidth="1",i.strokeStyle="#000000",i.beginPath(),s=e.x;s<n.x;s++)for(h=!1,o=e.y;o<n.y;o++)a=P(t.state,new r(s,o)),x(a)&&o!=n.y-1||!h||(i.moveTo(9*s-t.offset.x+4.5,17*h-t.offset.y-8.5),i.lineTo(9*s-t.offset.x+4.5,17*(o-1)-t.offset.y-8.5),h=!1),x(a)&&!h&&(h=o);for(o=e.y;o<n.y;o++)for(h=!1,s=e.x;s<n.x;s++)a=P(t.state,new r(s,o)),x(a)&&s!=n.x-1||!h||(i.moveTo(9*h-t.offset.x+4.5,17*o-t.offset.y-8.5),i.lineTo(9*(s-1)-t.offset.x+4.5,17*o-t.offset.y-8.5),h=!1),x(a)&&!h&&(h=s);t.context.stroke()}}function A(t,i){return new r(Math.min(Math.max(1,Math.round((new r((i.x-t.canvas.width/2)/t.zoom+t.offset.x,(i.y-t.canvas.height/2)/t.zoom+t.offset.y).x-4.5)/9)),1998),Math.min(Math.max(1,Math.round((new r((i.x-t.canvas.width/2)/t.zoom+t.offset.x,(i.y-t.canvas.height/2)/t.zoom+t.offset.y).y+8.5)/17)),598))}function F(t,i,e,n,s){s=s||"+";var o=new f(i,e),a=o.w,h=o.A,l=o.I,u=(o=o.J,n?e.x:i.x);for(n=n?i.y:e.y;a++<l;){var c=new r(a,n),d=t.getContext(new r(a,n));" "==s&&2==d.j+d.i||G(t,c,s)}for(;h++<o;)c=new r(u,h),d=t.getContext(new r(u,h))," "==s&&2==d.left+d.right||G(t,c,s);B(t,i,s),B(t,e,s),G(t,new r(u,n),s)}function O(t){this.state=t,this.a=null}function X(t,i){this.state=t,this.V=i,this.a=null}function W(t,i){this.state=t,this.value=i,h&&($("#freeform-tool-input").val(""),$("#freeform-tool-input").hide(0,(function(){$("#freeform-tool-input").show(0,(function(){$("#freeform-tool-input").focus()}))})))}function q(t){this.state=t,this.a=null}function j(t){this.state=t,this.b=this.a=null}function Y(t){this.state=t,this.e=this.a=null}function D(t,i,e){for(var n=i.clone(),s=[];;){var o=n.add(e);if(!x(P(t.state,o)))return l(i,n)||s.push(n),s;n=o,3==k(t.state.getContext(n))&&s.push(n)}}function K(t){this.state=t,this.F=this.p=this.b=this.a=null,this.K=!0,this.v=null}function L(t){var i=t.state.k.filter((function(t){return null!=y(t.n)&&" "!=y(t.n)})),e=c(new f(t.a,t.b));t.v=i.map((function(t){return new M(u(t.position,e),y(t.n))}))}function R(t,i){t.F=i,I(t.state);var e=new j(t.state);e.start(t.a),e.move(t.b),e=u(t.F,t.p).add(c(new f(t.a,t.b))),H(t,e)}function H(t,i){for(var e in t.v)B(t.state,t.v[e].position.add(i),t.v[e].value)}function N(){this.cells=Array(2e3),this.k=[],this.f=!0,this.R=[],this.O=[];for(var t=0;t<this.cells.length;t++){this.cells[t]=Array(600);for(var i=0;i<this.cells[t].length;i++)this.cells[t][i]=new g}}function P(t,i){return t.cells[i.x][i.y]}function B(t,i,e){var n=P(t,i);t.k.push(new E(i,n)),n.h=e,t.f=!0}function G(t,i,e){y(P(t,i))!=e&&B(t,i,e)}function I(t){for(var i in t.k)t.k[i].n.h=null;t.k.length=0}function J(t,i){var e=P(t,i),n=null!=e.h?e.h:e.value,a=-1!=s.indexOf(n),h=-1!=o.indexOf(n);if(!a&&!h)return n;if(e=t.getContext(i),a&&e.left&&e.right&&!e.j&&!e.i)return"-";if(a&&!e.left&&!e.right&&e.j&&e.i)return"|";if(4==k(e))return"-";if(h&&3==k(e)){if(!e.left)return"<";if(!e.j)return"^";if(!e.i)return"v";if(!e.right)return">"}if((a||h)&&3==k(e))return e.M=x(P(t,i.add(d).add(w))),e.Q=x(P(t,i.add(v).add(w))),e.L=x(P(t,i.add(d).add(p))),e.P=x(P(t,i.add(v).add(p))),!e.right&&e.M&&e.L||!e.left&&e.Q&&e.P?"|":!e.i&&e.M&&e.Q||!e.j&&e.P&&e.L?"-":(n=b(P(t,i.add(d).add(w))),a=b(P(t,i.add(v).add(w))),!(e.j&&e.left&&e.right)||n&&a?(n=b(P(t,i.add(d).add(p))),a=b(P(t,i.add(v).add(p))),!e.i||!e.left||!e.right||n&&a?"+":"-"):"-");if(h&&1==k(e)){if(e.left)return">";if(e.j)return"v";if(e.i)return"^";if(e.right)return"<"}return n}function U(t,i){var e=[],n=t.k.map((function(t){return t.position.x.toString()+t.position.y.toString()})),s=t.k.filter((function(t,i){return n.indexOf(n[i])==i}));for(var o in t.k.length=0,s){var a=s[o].position,h=s[o].n;e.push(new M(a,null!=h.value?h.value:" "));var r=y(h);" "!=r&&" "!=r||(r=null),x(h)&&(r=J(t,a)),h.h=null,h.value=r}s=i?t.O:t.R,0<e.length&&(50<s.length&&s.shift(),s.push(e)),t.f=!0}function Q(t){if(0!=t.R.length){var i,e=t.R.pop();for(i in e){var n=e[i];B(t,n.position,n.value)}U(t,!0)}}function V(t){if(0!=t.O.length){var i,e=t.O.pop();for(i in e){var n=e[i];B(t,n.position,n.value)}U(t)}}function _(t){for(var i=new r(Number.MAX_VALUE,Number.MAX_VALUE),e=new r(-1,-1),n=0;n<t.cells.length;n++)for(var s=0;s<t.cells[n].length;s++)null!=y(t.cells[n][s])&&(n<i.x&&(i.x=n),s<i.y&&(i.y=s),n>e.x&&(e.x=n),s>e.y&&(e.y=s));if(0>e.x)return"";var o="";for(s=i.y;s<=e.y;s++){var a="";for(n=i.x;n<=e.x;n++){var h=J(t,new r(n,s));a=a+(null==h||" "==h?" ":h)}o+=a.replace(/\s+$/,"").replace(/\s[\u4E00-\u9FFF]+/g,(function(t){return t.slice(1)}))+"\n"}return o}function Z(t,i,e){i=i.split("\n");for(var n=new r(0,Math.round(i.length/2)),a=0;a<i.length;a++)n.x=Math.max(n.x,Math.round(i[a].length/2));for(a=0;a<i.length;a++)for(var h=i[a],l=0;l<h.length;l++){var f=h.charAt(l);-1!=s.indexOf(f)&&(f="+"),-1!=o.indexOf(f)&&(f="^"),B(t,u(new r(l,a).add(e),n),f)}}function tt(t,i){this.view=t,this.state=i,this.d=new O(i),this.mode=0,this.r()}function it(t){2==t.mode&&t.d.end(),t.mode=0,t.G=null,t.H=null,t.s=null}function et(t,i){this.t=!1,this.state=t,this.view=i,this.file=null,st(this),$("#drive-button").click(function(){this.t?ht(this):(nt(this,!1),ot(this))}.bind(this)),$("#drive-filename").click(function(){var t=""+$("#drive-filename").text();t=prompt("Enter new filename:",t);this.file.title=t,this.save(),rt(this)}.bind(this)),ut(this),$(window).bind("hashchange",function(){ft(this)}.bind(this)),$("#drive-new-file-button").click(function(){this.file=null,this.state.clear(),window.location.hash="",this.save(),$("#drive-dialog").removeClass("visible")}.bind(this))}function nt(t,i){window.gapi.auth.authorize({client_id:"125643747010-9s9n1ne2fnnuh5v967licfkt83r4vba5.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive",immediate:i},function(t){!t||t.error||this.t||(this.t=!0,$("#drive-button").addClass("active"),window.setTimeout(function(){ft(this)}.bind(this),500))}.bind(t))}function st(t){window.gapi&&window.gapi.auth&&window.gapi.auth.authorize?nt(t,!0):window.setTimeout(function(){st(this)}.bind(t),500)}function ot(t){window.setTimeout(function(){this.t?ht(this):(nt(this,!0),ot(this))}.bind(t),1e3)}function at(t,i){t.file=i,$("#drive-filename").text(i.title),window.location.hash=i.id}function ht(t){$("#drive-dialog").addClass("visible");var i=_(t.state);5<i.length&&i!=t.D&&t.save(),rt(t)}function rt(t){try{lt(window.gapi.client.request({path:"/drive/v2/files",params:{q:"mimeType = 'text/plain' and trashed = false"},method:"GET"}),function(t){for(var i in $("#drive-file-list").children().remove(),t=t.items,t){var e=document.createElement("li"),n=document.createElement("a");e.appendChild(n),n.href="#"+t[i].id,$(n).click((function(){$("#drive-dialog").removeClass("visible")})),n.innerHTML=t[i].title,$("#drive-file-list").append(e)}}.bind(t))}catch(i){}}function lt(t,i){try{t.execute((function(t){t.error||i(t)}))}catch(e){}}function ut(t){_(t.state)!=t.D&&t.file&&t.file.editable&&t.save(),window.setTimeout(function(){ut(this)}.bind(t),5e3)}function ft(t){try{1<window.location.hash.length&&($("#drive-save-state").text("Loading..."),lt(window.gapi.client.request({path:"/drive/v2/files/"+window.location.hash.substr(1,window.location.hash.length-1),method:"GET"}),function(t){at(this,t),ct(this)}.bind(t)))}catch(i){console.warn(i)}}function ct(t){vt(t.file.downloadUrl,function(t){$("#drive-save-state").text("Loaded"),this.state.clear(),Z(this.state,t,A(this.view,new r(this.view.canvas.width/2,this.view.canvas.height/2))),U(this.state),this.D=_(this.state)}.bind(t))}function dt(t,i){var e="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify({title:null==t.file?"Untitled ASCII Diagram":t.file.title,mimeType:"text/plain"})+"\r\n---------314159265358979323846\r\nContent-Type: text/plain\r\n\r\n"+i+"\r\n---------314159265358979323846--";return window.gapi.client.request({path:"/upload/drive/v2/files"+(null==t.file?"":"/"+t.file.id),method:null==t.file?"POST":"PUT",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'},body:e})}function vt(t,i){var e=window.gapi.auth.getToken().access_token,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Authorization","Bearer "+e),n.onload=function(){i(n.responseText)},n.onerror=function(){i(null)},n.send()}function wt(t){this.c=t,this.r()}function pt(t){this.c=t,this.C=this.m=!1,this.r()}function mt(t,i){t.N=i,t.Y=$.now(),t.m=!1,window.setTimeout(function(){if(!this.m&&!this.C&&null!=this.N){var t=this.c;t.mode=2,t.d.start(A(t.view,i))}}.bind(t),150)}function gt(){var t=new N,i=new T(t),e=new tt(i,t);new pt(e),new wt(e),new et(t,i),i.animate()}T.prototype.animate=function(){(this.f||this.state.f)&&(this.f=!1,this.state.f=!1,z(this));var t=this;window.requestAnimationFrame((function(){t.animate()}))},n=O.prototype,n.start=function(t){this.a=t},n.move=function(t){this.b=t,I(this.state),F(this.state,this.a,t,!0),F(this.state,this.a,t,!1)},n.end=function(){U(this.state)},n.l=function(){return"crosshair"},n.g=function(){},n=X.prototype,n.start=function(t){this.a=t},n.move=function(t){I(this.state);var i=this.state.getContext(this.a),e=this.state.getContext(t);F(this.state,this.a,t,i.j&&i.i||e.left&&e.right),this.V&&B(this.state,t,"^")},n.end=function(){U(this.state)},n.l=function(){return"crosshair"},n.g=function(){},n=W.prototype,n.start=function(t){B(this.state,t,this.value)},n.move=function(t){B(this.state,t,this.value)},n.end=function(){U(this.state)},n.l=function(){return"crosshair"},n.g=function(t){h&&(this.value=$("#freeform-tool-input").val().substr(0,1),$("#freeform-tool-input").blur(),$("#freeform-tool-input").hide(0)),1==t.length&&(this.value=t)},n=q.prototype,n.start=function(t){U(this.state),$("#text-tool-input").val(""),this.a=t,t=y(P(this.state,this.a)),B(this.state,this.a,null==t?" ":t)},n.move=function(){},n.end=function(){null!=this.a&&(this.b=this.a,this.a=null,$("#text-tool-widget").hide(0,(function(){$("#text-tool-widget").show(0,(function(){$("#text-tool-input").focus()}))})))},n.l=function(){return"pointer"},n.g=function(){var t=$("#text-tool-input").val();I(this.state);for(var i=0,e=0,n=0;n<t.length;n++)if("\n"==t[n])e++,i=0;else{var s=new RegExp("[\\u4E00-\\u9FFF]+","g");s.test(t[n])?(B(this.state,this.b.add(new r(i,e)),t[n]),i+=2):(B(this.state,this.b.add(new r(i,e)),t[n]),i++)}},n=j.prototype,n.start=function(t){this.a=t,this.move(t)},n.move=function(t){I(this.state),this.b=t;var i=Math.min(this.a.x,this.b.x);t=Math.min(this.a.y,this.b.y);for(var e=Math.max(this.a.x,this.b.x),n=Math.max(this.a.y,this.b.y);i<=e;i++)for(var s=t;s<=n;s++)B(this.state,new r(i,s)," ")},n.end=function(){U(this.state)},n.l=function(){return"crosshair"},n.g=function(){},n=Y.prototype,n.start=function(t){var i;if(h)if(x(P(this.state,t)))i=t;else{i=m.concat([d.add(w),d.add(p),v.add(w),v.add(p)]);var e,n=null,s=0;for(e in i){var a=t.add(i[e]),r=k(this.state.getContext(a));x(P(this.state,a))&&r>s&&(n=i[e],s=r)}i=null==n?t:t.add(n)}else i=t;if(this.a=i,this.e=null,x(P(this.state,this.a))){for(var l in this.state.getContext(this.a),i=[],m){var u;n=D(this,this.a,m[l]);for(u in n)if(s=n[u],e=0!=m[l].x,a=-1!=o.indexOf(y(P(this.state,t))),r=-1!=o.indexOf(y(P(this.state,s))),1==k(this.state.getContext(s)))i.push({position:s,o:e,T:a,S:r});else for(var f in m)if(0!=m[l].add(m[f]).length()&&2!=m[l].add(m[f]).length()){var c=D(this,s,m[f]);0!=c.length&&(c=c[0],i.push({position:c,o:e,T:a,W:r,S:-1!=o.indexOf(y(P(this.state,c)))}))}}this.e=i,this.move(this.a)}},n.move=function(t){for(var i in I(this.state),this.e)F(this.state,this.a,this.e[i].position,this.e[i].o," ");for(i in this.e)F(this.state,t,this.e[i].position,this.e[i].o);for(i in this.e)this.e[i].T&&B(this.state,t,"^"),this.e[i].S&&B(this.state,this.e[i].position,"^"),this.e[i].W&&B(this.state,new r(this.e[i].o?this.e[i].position.x:t.x,this.e[i].o?t.y:this.e[i].position.y),"^")},n.end=function(){U(this.state)},n.l=function(t){return x(P(this.state,t))?"pointer":"default"},n.g=function(){},n=K.prototype,n.start=function(t){null!=this.a&&null!=this.b&&new f(this.a,this.b).contains(t)?(this.p=t,L(this),R(this,t)):(this.a=t,this.b=null,this.K=!1,this.move(t))},n.move=function(t){if(null!=this.p)R(this,t);else if(1!=this.K){this.b=t,I(this.state),t=new f(this.a,t);for(var i=t.w;i<=t.I;i++)for(var e=t.A;e<=t.J;e++){var n=new r(i,e),s=y(P(this.state,n));B(this.state,n,null==s?" ":s)}}},n.end=function(){null!=this.p&&(U(this.state),this.b=this.a=null),this.F=this.p=null,this.K=!0},n.l=function(t){return null!=this.a&&null!=this.b&&new f(this.a,this.b).contains(t)?"pointer":"default"},n.g=function(t){if(null!=this.a&&null!=this.b&&("<copy>"!=t&&"<cut>"!=t||L(this),"<cut>"==t)){var i=new j(this.state);i.start(this.a),i.move(this.b),U(this.state)}"<paste>"==t&&(H(this,this.a),U(this.state))},N.prototype.clear=function(){for(var t=0;t<this.cells.length;t++)for(var i=0;i<this.cells[t].length;i++)null!=y(this.cells[t][i])&&B(this,new r(t,i)," ");U(this)},N.prototype.getContext=function(t){var i=x(P(this,t.add(d))),e=x(P(this,t.add(v))),n=x(P(this,t.add(w)));return t=x(P(this,t.add(p))),new C(i,e,n,t)},tt.prototype.u=function(t){var i=A(this.view,t);if(null==this.s&&(this.s=i),l(i,this.s)||(this.view.canvas.style.cursor=this.d.l(i)),2!=this.mode||l(i,this.s)||this.d.move(i),1==this.mode){var e=this.view;t=this.H.add(u(this.G,t).scale(1/this.view.zoom)),e.offset=t,e.f=!0}this.s=i},tt.prototype.r=function(){var t=this;$(window).resize((function(){S(t.view)})),$("#draw-tools > button.tool").click(function(t){$("#text-tool-widget").hide(0),t=t.target.id,$("#draw-tools > button.tool").removeClass("active"),$("#"+t).toggleClass("active"),$(".dialog").removeClass("visible"),"box-button"==t&&(this.d=new O(this.state)),"line-button"==t&&(this.d=new X(this.state,!1)),"arrow-button"==t&&(this.d=new X(this.state,!0)),"freeform-button"==t&&(this.d=new W(this.state,"X")),"erase-button"==t&&(this.d=new j(this.state)),"move-button"==t&&(this.d=new Y(this.state)),"text-button"==t&&(this.d=new q(this.state)),"select-button"==t&&(this.d=new K(this.state)),U(this.state),this.view.canvas.focus()}.bind(this)),$("#file-tools > button.tool").click(function(t){t=t.target.id,$(".dialog").removeClass("visible"),$("#"+t+"-dialog").toggleClass("visible"),"import-button"==t&&($("#import-area").val(""),$("#import-area").focus()),"export-button"==t&&($("#export-area").val(_(this.state)),$("#export-area").select()),"clear-button"==t&&this.state.clear(),"undo-button"==t&&Q(this.state),"redo-button"==t&&V(this.state)}.bind(this)),$("button.close-dialog-button").click(function(){$(".dialog").removeClass("visible")}.bind(this)),$("#import-submit-button").click(function(){this.state.clear(),Z(this.state,$("#import-area").val(),A(this.view,new r(this.view.canvas.width/2,this.view.canvas.height/2))),U(this.state),$("#import-area").val(""),$(".dialog").removeClass("visible")}.bind(this)),$("#use-lines-button").click(function(){$(".dialog").removeClass("visible");var t=this.view;t.B=!0,t.f=!0}.bind(this)),$("#use-ascii-button").click(function(){$(".dialog").removeClass("visible");var t=this.view;t.B=!1,t.f=!0}.bind(this)),$(window).keypress(function(t){t.ctrlKey||t.metaKey||13==t.keyCode||this.d.g(String.fromCharCode(t.keyCode))}.bind(this)),$(window).keydown(function(t){var i=null;(t.ctrlKey||t.metaKey)&&(67==t.keyCode&&(i="<copy>"),86==t.keyCode&&(i="<paste>"),90==t.keyCode&&Q(this.state),89==t.keyCode&&V(this.state),88==t.keyCode&&(i="<cut>")),8==t.keyCode&&(i="<backspace>"),13==t.keyCode&&(i="<enter>"),38==t.keyCode&&(i="<up>"),40==t.keyCode&&(i="<down>"),37==t.keyCode&&(i="<left>"),39==t.keyCode&&(i="<right>"),null!=i&&this.d.g(i)}.bind(this)),$("#text-tool-input, #freeform-tool-input").keyup(function(){this.d.g("")}.bind(this)),$("#text-tool-input, #freeform-tool-input").change(function(){this.d.g("")}.bind(this)),$("#text-tool-close").click(function(){$("#text-tool-widget").hide(),U(this.state)}.bind(this))},et.prototype.save=function(){var t=_(this.state);$("#drive-save-state").text("Saving..."),lt(dt(this,t),function(i){at(this,i),$("#drive-save-state").text("Saved"),this.D=t}.bind(this))},wt.prototype.r=function(){var t=this.c.view.canvas;$(t).bind("mousewheel",function(t){t=this.c.view.zoom*(0<t.originalEvent.wheelDelta?1.1:.9),t=Math.max(Math.min(t,5),.2);var i=this.c.view;i.zoom=t,i.f=!0}.bind(this)),$(t).mousedown(function(t){if("undefined"===typeof window.siderWidth&&(window.siderWidth=document.querySelector(".ant-layout-sider").clientWidth||0),t.ctrlKey||t.metaKey){var i=this.c;t=new r(t.clientX-window.siderWidth,t.clientY),i.mode=1,i.G=t,i.H=i.view.offset}else i=this.c,t=new r(t.clientX-window.siderWidth,t.clientY),i.mode=2,i.d.start(A(i.view,t))}.bind(this)),$(t).mouseup(function(){it(this.c)}.bind(this)),$(t).mouseleave(function(){it(this.c)}.bind(this)),$(t).mousemove(function(t){"undefined"===typeof window.siderWidth&&(window.siderWidth=document.querySelector(".ant-layout-sider").clientWidth||0),this.c.u(new r(t.clientX-window.siderWidth,t.clientY))}.bind(this))},pt.prototype.u=function(t){if(!this.m&&150>$.now()-this.Y&&6<u(t,this.N).length()){this.m=!0;var i=this.c;i.mode=1,i.G=t,i.H=i.view.offset}this.c.u(t)},pt.prototype.reset=function(){this.C=this.m=!1,this.N=null},pt.prototype.r=function(){var t=this.c.view.canvas;$(t).bind("touchstart",function(t){if(t.preventDefault(),1==t.originalEvent.touches.length)mt(this,new r(t.originalEvent.touches[0].pageX,t.originalEvent.touches[0].pageY));else if(1<t.originalEvent.touches.length){var i=new r(t.originalEvent.touches[0].pageX,t.originalEvent.touches[0].pageY);t=new r(t.originalEvent.touches[1].pageX,t.originalEvent.touches[1].pageY),it(this.c),this.C=!0,this.m=!1,this.Z=u(i,t).length(),this.X=this.c.view.zoom}}.bind(this)),$(t).bind("touchmove",function(t){if(t.preventDefault(),1==t.originalEvent.touches.length)this.u(new r(t.originalEvent.touches[0].pageX,t.originalEvent.touches[0].pageY));else if(1<t.originalEvent.touches.length){var i=new r(t.originalEvent.touches[0].pageX,t.originalEvent.touches[0].pageY);t=new r(t.originalEvent.touches[1].pageX,t.originalEvent.touches[1].pageY),this.C&&(i=this.X*u(i,t).length()/this.Z,i=Math.max(Math.min(i,5),.5),t=this.c.view,t.zoom=i,t.f=!0)}}.bind(this)),$(t).bind("touchend",function(t){t.preventDefault(),this.reset(),it(this.c)}.bind(this))},i["default"]=gt}}]);
//# sourceMappingURL=chunk-2d0a331a.2e453cb6.js.map